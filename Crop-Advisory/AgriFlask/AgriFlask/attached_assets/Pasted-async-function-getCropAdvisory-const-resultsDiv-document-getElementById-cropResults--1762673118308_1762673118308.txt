async function getCropAdvisory() {
    const resultsDiv = document.getElementById('cropResults');
    resultsDiv.innerHTML = '<p>Loading crop advisory...</p>';
    // Use Geolocation API to get the user's location
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
            const { latitude, longitude } = position.coords;
            try {
                // Get crop recommendations using fetched latitude and longitude
                const advisoryResponse = await fetch(`${API_BASE_URL}/crops/advisory?lat=${latitude}&lon=${longitude}&lang=${currentLanguage}`);
                const allCrops = await advisoryResponse.json();
                if (allCrops && allCrops.length > 0) {
                    // Handle displaying crops
                    const selectedCrops = allCrops.slice(0, 5); // Limit to 5 crops
                    resultsDiv.innerHTML = selectedCrops.map(crop => `<p>${crop.name}</p>`).join('');
                    // Fetch recommended crops based on location
                    const recommendationResponse = await fetch(`${API_BASE_URL}/crops/recommendation?lat=${latitude}&lon=${longitude}`);
                    const recommendedCrops = await recommendationResponse.json();
                    if (recommendedCrops && recommendedCrops.length > 0) {
                        // Assuming the first crop is the best for demonstration purposes; adjust as needed.
                        const bestCrop = recommendedCrops[0];
                        resultsDiv.innerHTML += `<h4>Best Crop for Your Area:</h4><p>${bestCrop.name} - Best for your area</p>`;
                    } else {
                        resultsDiv.innerHTML += '<p>No crop recommendations available for your location.</p>';
                    }
                } else {
                    resultsDiv.innerHTML = `<p>No crop advisory available for your location.</p>`;
                }
            } catch (error) {
                console.error('Error fetching crop advisory:', error);
                resultsDiv.innerHTML = '<p>Error fetching crop advisory. Please try again.</p>';
            }
        }, () => {
            alert('Unable to retrieve your location. Please enter your location manually.');
            resultsDiv.innerHTML = '<p>Please enter a location.</p>';
        });
    } else {
        alert('Geolocation is not supported by this browser. Please enter your location manually.');
        resultsDiv.innerHTML = '<p>Please enter a location.</p>';
    }
}